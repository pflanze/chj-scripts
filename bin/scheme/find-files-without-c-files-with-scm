#!/bin/bash

# cj [Sat, 21 May 2005 22:24:33 +0200]
# copied from find-c-h-files-without-scm, changed for reverse Wed, 04 Jan 2006 14:17:28 +0100
# ehr no, not reverse, but: print all files unless .c with .scm
# "print all files which are not autogenerated from .scm files"

if [ $# -gt 0 ]; then
    dir="$1"
else
    dir="."
fi


#find "$dir" -name "*.[ch]"|perl -wne 'my $l=$_; chomp; s/\.[ch]$//; print $l unless -e "$_.scm"'|sort
# hmmm. in chicken sources it is possible to have both .h and .scm files. and yes, doesn't make much sense as such.


find "$dir" \! -name .git -prune -a -type f |perl -wne 'my $l=$_; chomp; print $l unless (s/_\.c$// or s/\.c$//) && -e "$_.scm"'|csort

# That ./lib/_gambc.c is still found is because there's really no scm file for it
